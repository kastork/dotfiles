#! /usr/bin/env zsh

# Pull a backup from the raid to local.

#! /usr/bin/env zsh

wd=`pwd`
svn=${wd:0:7}
d=${wd:7}
raid_loc="/Volumes/homes/${d}"

if [[ $svn == '/Users/' ]]
    then
        echo "This will pull all subdirectories of ${raid_loc}, proceed?"
        read proceed
        if [[ $proceed == 'y' ]]
            then
                open smb://kirk@SynologyRaid._smb._tcp.local/homes
                rsync -av --filter=': ${raid_loc}/.rsync-filter' "${raid_loc}/" .
        fi
    else
        echo "This command is only useable from directories rooted at /Users"
        exit 1
fi